<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
        	<w2:dataCollection baseNode="map">
        		<w2:dataList baseNode="list" repeatNode="map" id="dl_claimWait" saveRemovedData="true">
        			<w2:columnInfo>
        				<w2:column dataType="text" name="청구번호" id="claim_no"></w2:column>
        				<w2:column dataType="text" name="피보험자명" id="user_name"></w2:column>
        				<w2:column dataType="text" name="청구일자" id="receipt_date"></w2:column>
        				<w2:column dataType="text" name="마감일" id="deadline"></w2:column>
        				<w2:column dataType="text" name="담당자" id="emp_name"></w2:column>
        				<w2:column dataType="text" name="상태" id="status"></w2:column>
        				<w2:column dataType="text" name="id" id="id"></w2:column>
        			</w2:columnInfo>
        		</w2:dataList>
        		<w2:dataList baseNode="list" repeatNode="map" id="dl_claimDone" saveRemovedData="true">
        			<w2:columnInfo>
        				<w2:column dataType="text" name="청구번호" id="claim_no"></w2:column>
        				<w2:column dataType="text" name="피보험자명" id="user_name"></w2:column>
        				<w2:column dataType="text" name="청구일자" id="receipt_date"></w2:column>
        				<w2:column dataType="text" name="마감일" id="deadline"></w2:column>
        				<w2:column dataType="text" name="담당자" id="emp_name"></w2:column>
        				<w2:column dataType="text" name="상태" id="status"></w2:column>
        				<w2:column dataType="text" name="id" id="id"></w2:column>
        			</w2:columnInfo>
        		</w2:dataList>
        		<w2:dataMap baseNode="map" id="dm_empInfo">
        			<w2:keyInfo>
        				<w2:key dataType="text" name="사번" id="emp_no"></w2:key>
        				<w2:key dataType="text" name="이름" id="emp_name"></w2:key>
        				<w2:key dataType="text" name="페이지_번호" id="pageIndex" defaultValue="1"></w2:key>
        				<w2:key defaultValue="100" dataType="text" name="페이지_건수" id="pageSize"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        	</w2:dataCollection>
        	<w2:workflowCollection />
        	<xf:submission id="sbm_getWaitList" action="/InsWebApp/CLAIMManagerwStatusList.pwkjson" method="post" mediatype="application/json" ref='' target='data:json,{"id":"dl_claimWait","key":"claimListwStatusVoList"}' encoding="UTF-8"
        		instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="로딩 중.." ev:submit="" ev:submitdone="scwin.sbm_getWaitList_submitdone"
        		ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_getDoneList" action="/InsWebApp/CLAIMManagerwStatusList.pwkjson" method="post" mediatype="application/json" ref='' target='data:json,{"id":"dl_claimDone","key":"claimListwStatusVoList"}' encoding="UTF-8"
        		instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone=""
        		ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function() {
    scwin.emp = JSON.parse(localStorage.getItem("employee"));
    dm_empInfo.set("emp_no", scwin.emp.empNo);
    dm_empInfo.set("emp_name", scwin.emp.empName)

    // 가져오기
    let req = {elData: {"emp_no": scwin.emp.empNo, "status": "결재중"}};
    $c.sbm.execute(sbm_getWaitList, req);

    let req2 = {elData: {"emp_no": scwin.emp.empNo, "status": "결재완료"}};
    $c.sbm.execute(sbm_getDoneList, req2);
}; 

function moveNsave(rowData) {
    // claimNo, ID, user_name, status, empName
    const claim = {
        claimNo: rowData.claim_no,
        ID: rowData.ID,
        empName: rowData.empName,
        userName: rowData.user_name,
        status: rowData.status
    };
    localStorage.setItem("claim", JSON.stringify(claim));
    
    location.href = "/InsWebApp/websquare/websquare.html?w2xPath=/InsWebApp/ui/audit/insure_first.xml";
}

scwin.grid_w_oncelldblclick = function (rowIndex, columnIndex, columnId) {
    let rowData = grid_w.getRowJSON(rowIndex);
    moveNsave(rowData);
};

scwin.grd_d_oncelldblclick = function (rowIndex, columnIndex, columnId) {
    let rowData = grid.getRowJSON(rowIndex);
    moveNsave(rowData);
};
]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group class="sub_contents" id="" meta_snippetCategory="00_화면시작" meta_snippetKeyComponent="true" meta_snippetName="0_01 페이지시작"
    		style="">
    		<xf:group class="pgtbox" id="" meta_snippetCategory="02_타이틀" meta_snippetKeyComponent="true" meta_snippetName="2_01 페이지타이틀"
    			style="border-bottom: .2px solid #3674B5;padding-bottom: 20px;">
    			<w2:textbox class="pgt_tit" id="" label="담당 청구 내역" style="" tagname=""></w2:textbox>
    		</xf:group>
    		<xf:group style="width: 100%;margin-top: 20px;" id="">
    			<xf:group class="lybox" id="" meta_snippetCategory="01_화면분할" meta_snippetKeyComponent="true"
    				meta_snippetName="1_01 가변 2단 분할" style="width: 40%;">
    				<xf:group adaptiveThreshold="" class=" col_5" id="" style="display: flex;font-size: 15px;gap: 10px">
    					<w2:textbox id="" label="사번:"
    						style="height:30px;text-align:center;line-height:28px;box-sizing:border-box;font-weight: 600">
    					</w2:textbox>
    					<w2:textbox id="" label="" style="height:30px;line-height:28px;box-sizing:border-box;width: 70%;" ref="data:dm_empInfo.emp_no"></w2:textbox>
    				</xf:group>
    				<xf:group adaptiveThreshold="" class=" col_5" id="" style="display: flex;font-size: 15px;gap: 10px">
    					<w2:textbox id="" label="이름: "
    						style="height:30px;text-align:center;line-height:28px;box-sizing:border-box;font-weight: 600">
    					</w2:textbox>
    					<w2:textbox id="" label="" style="height:30px;line-height:28px;box-sizing:border-box;width: 70%;" ref="data:dm_empInfo.emp_name"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group class="tbcbox" id="" meta_snippetCategory="04_탭" meta_snippetKeyComponent="true" meta_snippetName="4_02 서브탭"
    			style="">
    			<w2:tabControl alwaysDraw="false" style="margin-top: 40px;height: 100%;" id="tab" class="tbc_sub">
    				<w2:tabs disabled="false" style="width: 100px;height:30px;" id="tab1" label="결재 중"></w2:tabs>
    				<w2:tabs disabled="false" style="width: 100px;height:30px;" id="tab3" label="결재 완료"></w2:tabs>
    				<w2:content alwaysDraw="false" style="height: 100%;" id="content2">
    					<xf:group adaptiveThreshold="" class="gvwbox" id="" meta_snippetCategory="06_그리드" meta_snippetKeyComponent="true"
    						meta_snippetName="6_01 그리드" style="margin-top: 20px">
    						<w2:gridView autoFit="allColumn" checkReadOnlyOnPasteEnable="" class="gvw" dataList="data:dl_claimWait"
    							focusMode="row" id="grid_w" scrollByColumn="false" scrollByColumnAdaptive="false" style="height: 500px;"
    							ev:oncellclick="scwin.grid_oncellclick" readOnly="true" ev:oncelldblclick="scwin.grid_w_oncelldblclick">
    							<w2:caption id="caption9" style="" value="this is a grid caption."></w2:caption>
    							<w2:header id="header2" style="">
    								<w2:row id="row3" style="">
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column12" value="청구번호"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column11" value="피보험자명"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column10" value="청구일자"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column9" value="마감일"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column8" value="담당자"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column hidden="false" removeBorderStyle="false" width="70" inputType="text" id="column7"
    										value="상태" blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column width="70" inputType="text" style="" id="column6" value="id" displayMode="label"
    										hidden="true">
    									</w2:column>
    								</w2:row>
    							</w2:header>
    							<w2:gBody id="gBody2" style="">
    								<w2:row id="row4" style="">
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="claim_no" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="user_name" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="receipt_date"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="deadline" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="emp_name" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="status" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column width="70" inputType="text" style="" id="id" value="" displayMode="label"></w2:column>
    								</w2:row>
    							</w2:gBody>
    						</w2:gridView>
    					</xf:group>
    				</w2:content>
    				<w2:content alwaysDraw="false" style="height: 100%;" id="content3">
    					<xf:group adaptiveThreshold="" class="gvwbox" id="" meta_snippetCategory="06_그리드" meta_snippetKeyComponent="true"
    						meta_snippetName="6_01 그리드" style="margin-top: 20px">
    						<w2:gridView autoFit="allColumn" checkReadOnlyOnPasteEnable="" class="gvw" dataList="data:dl_claimDone"
    							focusMode="row" id="grd_d" scrollByColumn="false" scrollByColumnAdaptive="false" style="height: 500px;" readOnly="true" ev:oncelldblclick="scwin.grd_d_oncelldblclick">
    							<w2:caption id="caption7" style="" value="this is a grid caption."></w2:caption>
    							<w2:header id="header2" style="">
    								<w2:row id="row3" style="">
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column12" value="청구번호"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column11" value="피보험자명"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column10" value="청구일자"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column9" value="마감일"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column8" value="담당자"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="column7" value="상태"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column width="70" inputType="text" style="" id="column8" value="id" displayMode="label"
    										hidden="true">
    									</w2:column>
    								</w2:row>
    							</w2:header>
    							<w2:gBody id="gBody2" style="">
    								<w2:row id="row4" style="">
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="claim_no" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="user_name" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="receipt_date"
    										blockSelect="false" displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="deadline" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="emp_name" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column removeBorderStyle="false" width="70" inputType="text" id="status" blockSelect="false"
    										displayMode="label">
    									</w2:column>
    									<w2:column width="70" inputType="text" style="" id="id" value="" displayMode="label"></w2:column>
    								</w2:row>
    							</w2:gBody>
    						</w2:gridView>
    					</xf:group>
    				</w2:content>
    			</w2:tabControl>
    		</xf:group>
    	</xf:group>
    </body>
</html>

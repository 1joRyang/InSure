<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/InsWebApp/cm/css/claimPopup.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ev="http://www.w3.org/2001/xml-events"
      xmlns:w2="http://www.inswave.com/websquare"
      xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map">
                <w2:dataMap id="dateData">
                    <w2:keyInfoList>
                        <w2:keyInfo id="selectedDate" dataType="text"></w2:keyInfo>
                    </w2:keyInfoList>
                </w2:dataMap>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <w2:layout css="true" src="/InsWebApp/cm/css/claimPage.css"></w2:layout>
        <script lazy="false" type="text/javascript"><![CDATA[
            scwin.onpageload = function() {
                var today = new Date();
                var formattedDate = WebSquare.util.dateToString(today, "yyyy-MM-dd");
                dateData.set("selectedDate", formattedDate);

                var initialDate = $p.getParam("initialDate");
                if (initialDate) {
                    dateData.set("selectedDate", initialDate);
                }
            };

            scwin.onClickConfirm = function() {
                var selectedDate = dateData.get("selectedDate");
                $p.closePopup({ date: selectedDate });
            };

            scwin.onClickCancel = function() {
                $p.closePopup();
            };
        ]]></script>
    </head>
    <body>
        <xf:group class="popup-wrapper">
            <xf:group class="date-picker-container">
                <xf:group class="popup-header">
                    <w2:textbox class="popup-title" label="년/월/일 선택"></w2:textbox>
                    <xf:trigger class="popup-close-button" ev:onclick="scwin.onClickCancel">
                        <w2:image src="/images/close_icon.png" alt="닫기" style="width: 24px; height: 24px;"></w2:image>
                    </xf:trigger>
                </xf:group>
                <xf:group class="date-picker-content">
                    <w2:datePicker id="datePicker"
                        ref="data:dateData.selectedDate"
                        class="custom-date-picker"
                        renderType="spinner"
                        type="date"
                        weekView="false"
                        dateFormat="yyyy년 MM월 dd일"
                        startYear="1950"
                        endYear="2050"
                        style="width:100%; height: 200px;">
                    </w2:datePicker>
                </xf:group>
                <xf:group class="popup-footer button-group">
                    <w2:button id="btn_cancel" class="cancel-button" label="취소" ev:onclick="scwin.onClickCancel"></w2:button>
                    <w2:button id="btn_confirm" class="confirm-button" label="확인" ev:onclick="scwin.onClickConfirm"></w2:button>
                </xf:group>
            </xf:group>
        </xf:group>
    </body>
</html>
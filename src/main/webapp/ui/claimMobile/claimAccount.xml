<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/InsWebApp/cm/css/claimPage.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map">
                <w2:dataMap id="claimData">
                    <w2:keyInfoList>
                        <w2:keyInfo id="claimType" dataType="text"></w2:keyInfo>
                        <w2:keyInfo id="selectedAccountType" dataType="text"></w2:keyInfo> <w2:keyInfo id="selectedAccountInfo" dataType="text"></w2:keyInfo> <w2:keyInfo id="medicalAidStatus" dataType="text"></w2:keyInfo> </w2:keyInfoList>
                </w2:dataMap>
                <w2:dataList id="accountTypeList" baseNode="list" repeatNode="map">
                    <w2:columnInfo>
                        <w2:column id="code" name="코드" dataType="text"></w2:column>
                        <w2:column id="label" name="라벨" dataType="text"></w2:column>
                    </w2:columnInfo>
                    <w2:data use='true'>
                        <w2:row>
                            <w2:column>autoTransfer</w2:column>
                            <w2:column>자동이체계좌</w2:column>
                        </w2:row>
                        <w2:row>
                            <w2:column>newAccount</w2:column>
                            <w2:column>새 계좌</w2:column>
                        </w2:row>
                    </w2:data>
                </w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <w2:layout css="true" src="/css/custom.css"></w2:layout> <script lazy="false" type="text/javascript"><![CDATA[
            scwin.onpageload = function() {
                // 페이지 로드 시 초기화 로직
                // 이전 페이지에서 넘어온 데이터(claimType)를 받을 수 있다면 여기서 처리
                // 예: var prevClaimType = $p.getParam("claimType");

                // 계좌 유형 셀렉트 박스 초기 선택값 설정 (예: 자동이체계좌)
                $p.get("sbx_accountType").setValue("autoTransfer"); // code 값으로 설정
                dlt_claimData.set("selectedAccountType", "autoTransfer");

                // 계좌 정보 초기값 설정 (예시 데이터)
                dlt_claimData.set("selectedAccountInfo", "KB국민은행(임*희,200****04189430)");
                // $p.get("txb_accountInfo").setValue(dlt_claimData.get("selectedAccountInfo")); // textbox는 value 바인딩이 안되므로 JS로 설정

                // 의료급여 지원 초기값 설정 (필요 시)
                // dlt_claimData.set("medicalAidStatus", "");
            };

            // "예" 버튼 클릭 이벤트
            scwin.onClickYes = function() {
                $p.get("btnYes").addClass("selected");
                $p.get("btnNo").removeClass("selected");
                dlt_claimData.set("medicalAidStatus", "Y");
                console.log("의료급여 지원: 예", dlt_claimData.get("medicalAidStatus"));
            };

            // "아니오" 버튼 클릭 이벤트
            scwin.onClickNo = function() {
                $p.get("btnNo").addClass("selected");
                $p.get("btnYes").removeClass("selected");
                dlt_claimData.set("medicalAidStatus", "N");
                console.log("의료급여 지원: 아니오", dlt_claimData.get("medicalAidStatus"));
            };

            // "다음" 버튼 클릭 이벤트
            scwin.onClickNext = function() {
                // 필수 입력 값 검증 (예: 계좌 유형 및 의료급여 여부 선택)
                if (!dlt_claimData.get("selectedAccountType")) {
                    alert("보험금 지급 계좌 유형을 선택해주세요.");
                    return;
                }
                if (!dlt_claimData.get("medicalAidStatus")) {
                    alert("국가에서 의료급여 지원 여부를 선택해주세요.");
                    return;
                }

                alert("다음 화면으로 이동!");
                // 실제 다음 화면으로 이동하는 로직 (예: $p.open 또는 $p.pageMove)
                // $p.open("/path/to/nextPage.xml", {
                //      "param": {
                //          "accountType": dlt_claimData.get("selectedAccountType"),
                //          "accountInfo": dlt_claimData.get("selectedAccountInfo"),
                //          "medicalAid": dlt_claimData.get("medicalAidStatus")
                //      }
                // });
            };
        ]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
        <xf:group class="sub_contents" id="wrapper" style="">
            <xf:group class="header-section" id="header">
                <w2:textbox class="step_tit" id="" label="보험금계좌" style="" tagname=""></w2:textbox>
                <xf:group class="step" id="">
                    <xf:group id="" tagname="ul">
                        <xf:group class="checked" id="" tagname="li">
                            <w2:span id="" label="✔"></w2:span>
                        </xf:group>
                        <xf:group class="checked" id="" tagname="li">
                             <w2:span id="" label="✔"></w2:span>
                        </xf:group>
                        <xf:group class="checked" id="" tagname="li">
                            <w2:span id="" label="✔"></w2:span> </xf:group>
                        <xf:group class="current" id="" tagname="li">
                            <w2:span id="" label="4"></w2:span> </xf:group>
                        <xf:group class="inactive" id="" tagname="li">
                            <w2:span id="" label="5"></w2:span>
                        </xf:group>
                        <xf:group class="inactive" id="" tagname="li">
                            <w2:span id="" label="6"></w2:span>
                        </xf:group>
                        <xf:group class="inactive" id="" tagname="li">
                            <w2:span id="" label="7"></w2:span>
                        </xf:group>
                    </xf:group>
                </xf:group>
            </xf:group>

            <xf:group class="content-section" id="mainContent">
                <w2:textbox class="question-text" id="" label="보험금 받을 계좌를 입력해 주세요"></w2:textbox>

                <w2:textbox class="account-label" id="" label="보험금 지급 계좌"></w2:textbox>

                <xf:select1 id="sbx_accountType" chooseOption="false" style="" class="custom-select1"
                            appearance="minimal" ev:onchange="scwin.onAccountTypeChange"
                            ref="data:claimData.selectedAccountType"
                            displayColumn="label" valueColumn="code" dataList="accountTypeList">
                    </xf:select1>

                <w2:input id="inp_accountInfo" class="account-input" readOnly="true"
                          ref="data:claimData.selectedAccountInfo" placeholder="계좌정보가 표시됩니다."></w2:input>

                <w2:textbox class="account-label" id="" label="국가에서 의료급여 지원을 받고 있나요?" style="margin-top: 30px;"></w2:textbox>

                <xf:group class="yn-button-container" id="medicalAidGroup">
                    <xf:group class="yn-button" id="btnYes" ev:onclick="scwin.onClickYes()">
                        <w2:textbox id="" label="예"></w2:textbox>
                    </xf:group>
                    <xf:group class="yn-button" id="btnNo" ev:onclick="scwin.onClickNo()">
                        <w2:textbox id="" label="아니오"></w2:textbox>
                    </xf:group>
                </xf:group>

                <xf:group style="flex: 1;" id=""></xf:group>
            </xf:group>

            <xf:group class="footer-section" id="footer">
                <w2:button class="next-button" id="btnNext" label="다음" ev:onclick="scwin.onClickNext()"></w2:button>
            </xf:group>
        </xf:group>
    </body>
</html>
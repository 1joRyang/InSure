<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/InsWebApp/cm/css/claimPage.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map">
                <w2:dataMap id="claimData">
                    <w2:keyInfoList>
                        <w2:keyInfo id="claimType" dataType="text"></w2:keyInfo>
                    </w2:keyInfoList>
                </w2:dataMap>
            </w2:dataCollection>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <w2:layout css="true" src="/css/custom.css"></w2:layout>
        <script lazy="false" type="text/javascript"><![CDATA[
            scwin.onpageload = function() {
                // 페이지 로드 시 초기화 로직 (필요하다면)
                // 예: 이전에 선택된 값이 있다면 해당 박스에 'selected' 클래스 추가
            };

            // "아팠어요(질병)" 선택 박스 클릭 이벤트 핸들러
            scwin.selectDisease = function() {
                var diseaseBox = $p.get("diseaseSelectionBox"); // id로 컴포넌트 접근
                var injuryBox = $p.get("injurySelectionBox");

                // 'selected' 클래스 토글 (선택 상태 변경)
                if (diseaseBox.hasClass("selected")) {
                    // 이미 선택되어 있으면 해제
                    diseaseBox.removeClass("selected");
                    dlt_claimData.set("claimType", ""); // 데이터 모델 값 초기화
                } else {
                    // 선택되지 않았으면 선택 및 다른 박스 선택 해제
                    diseaseBox.addClass("selected");
                    injuryBox.removeClass("selected");
                    dlt_claimData.set("claimType", "disease"); // 데이터 모델에 값 설정
                }
                console.log("현재 선택된 청구 유형:", dlt_claimData.get("claimType"));
            };

            // "다쳤어요(상해)" 선택 박스 클릭 이벤트 핸들러
            scwin.selectInjury = function() {
                var diseaseBox = $p.get("diseaseSelectionBox");
                var injuryBox = $p.get("injurySelectionBox");

                if (injuryBox.hasClass("selected")) {
                    injuryBox.removeClass("selected");
                    dlt_claimData.set("claimType", "");
                } else {
                    injuryBox.addClass("selected");
                    diseaseBox.removeClass("selected");
                    dlt_claimData.set("claimType", "injury");
                }
                console.log("현재 선택된 청구 유형:", dlt_claimData.get("claimType"));
            };

            // "다음" 버튼 클릭 이벤트 핸들러
            scwin.onClickNext = function() {
                var selectedClaimType = dlt_claimData.get("claimType");

                if (!selectedClaimType) {
                    alert("청구 유형을 선택해주세요.");
                    return;
                }

                alert("다음 화면으로 이동! 선택된 유형: " + selectedClaimType);
                // 실제 다음 화면으로 이동하는 로직 (예: $p.open 또는 $p.pageMove)
                // $p.open("/path/to/nextPage.xml", {
                //     "param": { "claimType": selectedClaimType }
                // });
            };
        ]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
        <xf:group class="sub_contents" id="wrapper" style="">
            <xf:group class="header-section" id="header" style="">
                <w2:textbox class="step_tit" id="" label="청구유형" style="" tagname=""></w2:textbox>
                <xf:group class="step" id="" style="">
                    <xf:group id="" style="" tagname="ul">
                    	<xf:group class="current" id="" style="" tagname="li">
                    		<w2:span id="" label="1" style=""></w2:span>
                    	</xf:group>

                    	<xf:group class="inactive" id="" style="" tagname="li">
                    		<w2:span id="" label="2" style=""></w2:span>
                    	</xf:group>
                    	<xf:group class="inactive" id="" style="" tagname="li">
                    		<w2:span id="" label="3" style=""></w2:span>
                    	</xf:group>
                    	<xf:group class="inactive" id="" style="" tagname="li">
                    		<w2:span id="" label="4" style=""></w2:span>
                    	</xf:group>
                    	<xf:group class="inactive" id="" style="" tagname="li">
                    		<w2:span id="" label="5" style=""></w2:span>
                    	</xf:group>
                    	<xf:group class="inactive" id="" style="" tagname="li">
                    		<w2:span id="" label="6" style=""></w2:span>
                    	</xf:group>
                    	<xf:group class="inactive" id="" style="" tagname="li">
                    		<w2:span id="" label="7" style=""></w2:span>
                    	</xf:group>
                    </xf:group>
                </xf:group>
            </xf:group>

            <xf:group class="content-section" id="mainContent" style="margin: 0 auto;">
                <w2:textbox class="question-text" id="" label="어떤 진료로 방문하셨나요?" style=""></w2:textbox>

                <xf:group class="selection-box-container" id="diseaseSelectionBox" ev:onclick="scwin.selectDisease()">
                    <xf:image src="/images/icon_calendar.png" class="selection-box-icon" id="imgDiseaseIcon"></xf:image>
                    <w2:textbox id="" label="아팠어요(질병)" class="selection-box-text"></w2:textbox>
                </xf:group>

                <xf:group class="selection-box-container" id="injurySelectionBox" ev:onclick="scwin.selectInjury()">
                    <xf:image src="/images/icon_shield.png" class="selection-box-icon" id="imgInjuryIcon"></xf:image>
                    <w2:textbox id="" label="다쳤어요(상해)" class="selection-box-text"></w2:textbox>
                </xf:group>

                <xf:group style="flex: 1;" id=""></xf:group>
            </xf:group>

            <xf:group class="footer-section" id="footer" style="">
                <w2:button class="next-button" id="btnNext" label="다음" ev:onclick="scwin.onClickNext()"></w2:button>
            </xf:group>
        </xf:group>
    </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
        	<w2:dataCollection baseNode="map">
        		<w2:dataMap baseNode="map" id="dm_emp">
        			<w2:keyInfo>
        				<w2:key dataType="text" name="empName" id="empName"></w2:key>
        				<w2:key dataType="text" name="empNo" id="empNo"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        		<w2:dataMap baseNode="map" id="dm_addi">
        			<w2:keyInfo>
        				<w2:key dataType="text" name="return_memo" id="return_memo"></w2:key>
        				<w2:key dataType="text" name="claim_no" id="claim_no"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        		<w2:dataMap baseNode="map" id="dm_result">
        			<w2:keyInfo>
        				<w2:key dataType="text" name="claim_no" id="claim_no"></w2:key>
        				<w2:key dataType="text" name="amount" id="amount"></w2:key>
        				<w2:key dataType="text" name="claim_memo" id="claim_memo"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        	</w2:dataCollection>
        	<w2:workflowCollection />
        	<xf:submission id="sbm_getEmpName" action="/InsWebApp/EmployeeUpdView.pwkjson" method="post" mediatype="application/json"
        		ref='data:json,{"id":"dm_emp","key":"elData"}' target='data:json,{"id":"dm_emp","key":"elData"}' encoding="UTF-8" instance=""
        		replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="" ev:submiterror=""
        		abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_getCResult" action="/InsWebApp/CLAIMRESULTUpdView.pwkjson" method="post" mediatype="application/json" ref='data:json,{"id":"dm_result","key":"elData"}' target='data:json,{"id":"dm_result","key":"elData"}' encoding="UTF-8"
        		instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="scwin.sbm_getCResult_submitdone"
        		ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_getReturn" action="/InsWebApp/RETURNREQUpdView.pwkjson" method="post" mediatype="application/json" ref='data:json,{"id":"dm_addi","key":"elData"}' target='data:json,{"id":"dm_addi","key":"elData"}' encoding="UTF-8"
        		instance="" replace="" errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit="" ev:submitdone="scwin.sbm_getReturn_submitdone"
        		ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function() {
	scwin.userClaim = JSON.parse(localStorage.getItem("userClaim"));
    txt_claimNo.setValue(scwin.userClaim.claim_no);
    txt_claimType.setValue(scwin.userClaim.claim_type);

    dm_emp.set("empNo", scwin.userClaim.emp_no);
    $c.sbm.execute(sbm_getEmpName);

    let status = "";

    if (scwin.userClaim.status != "완료") {

        if (scwin.userClaim.status === "반송") {
            txt_title.setValue("반송된 청구");
            st_gre.hide();
            status = scwin.userClaim.status;
        } else { 
            txt_title.setValue("진행 중인 청구");
            st_re.hide();
            status = "심사 중";
        }

        grp_result.hide();
        st_do.hide();
        st_app.hide();

    } else {
        txt_title.setValue("완료된 청구");
        st_noapp.hide();
        st_nodo.hide();
        st_re.hide();
        status = scwin.userClaim.status;
    }

    txt_status.setValue(status);
    txt_claim_status.setValue(status);

    if (scwin.userClaim.status != "완료" && scwin.userClaim.status != "반송") {
        memo_box.hide();
    } else if (scwin.userClaim.status === "완료") {
        // 결과 가져오기
        dm_result.set("claim_no", scwin.userClaim.claim_no);
        $c.sbm.execute(sbm_getCResult);
    } else {
        // 반송 메모 가져오기
        dm_addi.set("claim_no", scwin.userClaim.claim_no);
        $c.sbm.execute(sbm_getReturn);
    }
};

scwin.sbm_getCResult_submitdone = function (e) {
    memo.setValue(dm_result.get("claim_memo"));
};

scwin.sbm_getReturn_submitdone = function (e) {
    memo.setValue(dm_addi.get("return_memo"));
};
]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" class="mobile-page-body">
        <w2:wframe src="/InsWebApp/ui/cmmn/m_header_title.xml" style="flex-shrink: 0;" id="" class="wfm_m_header"></w2:wframe>
    	<xf:group class="mobile-page-contain" id="" meta_snippetCategory="00_화면시작" meta_snippetKeyComponent="true" meta_snippetName="0_01 페이지시작"
    		style="display: flex;flex-direction: column;gap: 15px;">
    		<xf:group style="border: 1px solid #D9D9D9;border-radius: 15px;padding: 20px;" id="">
    			<xf:group style="" id="">
    				<w2:textbox id="txt_title" label="진행" style="font-size: 17px;font-weight: 700;margin-bottom: 20px;"></w2:textbox>
    			</xf:group>
    			<xf:group style="border-left: 2px solid #578FCA;" id="">
    				<xf:group style="display: flex;gap: 8px;padding: 0 10px;" id="">
    					<xf:output label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #22C55E" id="">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="청구 접수" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    				<xf:group id="" style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;">
    					<xf:output id="" label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #22C55E">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="서류 검토" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    				<xf:group style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;" id="st_re">
    					<xf:output style="border-radius: 100px;width: 20px;height: 20px;background-color: #FD9A9A;" id="" label="">
    						<xf:label></xf:label>
    					</xf:output>
    					<w2:textbox style="font-size: 15px;" id="" label="보험금 심사"></w2:textbox>
    				</xf:group>
    				<xf:group id="st_gre" style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;">
    					<xf:output id="" label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #22C55E">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="보험금 심사" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    				<xf:group id="st_app" style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;">
    					<xf:output id="" label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #22C55E">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="승인 완료" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    				<xf:group id="st_do" style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;">
    					<xf:output id="" label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #22C55E">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="보험금 지급" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    				<xf:group id="st_noapp" style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;">
    					<xf:output id="" label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #D9D9D9;">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="승인 완료" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    				<xf:group id="st_nodo" style="display: flex;gap: 8px;padding-left: 10px;padding-top: 10px;">
    					<xf:output id="" label="" style="border-radius: 100px;width: 20px;height: 20px;background-color: #D9D9D9;">
    						<xf:label><![CDATA[]]></xf:label>
    					</xf:output>
    					<w2:textbox id="" label="보험금 지급" style="font-size: 15px;"></w2:textbox>
    				</xf:group>
    			</xf:group>
    		</xf:group>
    		<xf:group style="border: 1px solid #D9D9D9;border-radius: 15px;padding: 20px;" id="">
    			<xf:group id="" style="display: flex;justify-content: space-between">
    				<w2:textbox id="txt_claimNo" label="" style="font-size: 17px;font-weight: 700;margin-bottom: 20px;"></w2:textbox>
    				<w2:textbox id="txt_status" label="" style="font-size: 17px;font-weight: 700;margin-bottom: 20px;"></w2:textbox>
    			</xf:group>
    			<xf:group style="display: flex;justify-content: space-between;font-weight: 700;" id="">
    				<w2:textbox id="" label="청구 유형" style="width: 150px;height: 23px;"></w2:textbox>
    				<w2:textbox id="txt_claimType" label="기타" style="text-align: end;"></w2:textbox>
    			</xf:group>
    			<xf:group id="" style="display: flex;justify-content: space-between;font-weight: 700;">
    				<w2:textbox id="" label="현재 상태" style="width: 150px;height: 23px;"></w2:textbox>
    				<w2:textbox id="txt_claim_status" label="대기" style="text-align: end;"></w2:textbox>
    			</xf:group>
    			<xf:group id="grp_result" style="display: flex;justify-content: space-between;font-weight: 700;">
    				<w2:textbox id="" label="지급금액" style="width: 150px;height: 23px;"></w2:textbox>
    				<w2:textbox id="" label="0" style="text-align: end;" ref="data:dm_result.amount" dataType="number" displayFormat="##,###,###,###"></w2:textbox>
    			</xf:group>
    			<xf:group id="" style="display: flex;justify-content: space-between;font-weight: 700;">
    				<w2:textbox id="" label="담당자" style="width: 150px;height: 23px;"></w2:textbox>
    				<w2:textbox id="" label="" style="text-align: end;" ref="data:dm_emp.empName"></w2:textbox>
    			</xf:group>
    		</xf:group>
    		<xf:group id="memo_box" style="border: 1px solid #D9D9D9;border-radius: 15px;padding: 20px;">
    			<xf:group id="" style="display: flex;justify-content: space-between">
    				<w2:textbox id="" label="심사내용" style="font-size: 17px;font-weight: 700;margin-bottom: 20px;"></w2:textbox>
    			</xf:group>
    			<w2:textbox id="memo" label="" style="width: 100%;min-height: 50px;"></w2:textbox>
    		</xf:group>
    	</xf:group>
        <w2:wframe style="flex-shrink: 0;" id="" class="wfm_m_footer" src="/InsWebApp/ui/cmmn/m_footer.xml"></w2:wframe>
    </body>
</html>

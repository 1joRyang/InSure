<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/InsWebApp/css/table.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head>
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map"/>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script cache="false" scopeExternal="false" src="/InsWebApp/js/insure/ocr-table.js" scopeVariable="" type="text/javascript"></script>
        <script cache="false" scopeExternal="false" src="/InsWebApp/js/insure/ocr-tableStruc.js" scopeVariable="" type="text/javascript"></script>
        <script lazy="false" type="text/javascript"><![CDATA[// 페이지 로드 시 모든 테이블 생성
scwin.onpageload = function() {
    // todo: 테이블 불러와서 넣기
    // 페이지가 로드될 때 기본 빈 테이블 생성
    scwin.createEmptyTable();
    
    // 서브테이블과 결과테이블 생성
    scwin.createSubTable();
    scwin.createResultTable();
};

scwin.btn_ocr_onclick = function (e) {
    // OCR 버튼 클릭 시 OCR 결과를 받아서 테이블을 동적으로 업데이트
    let data_rows = [
        { "col1": "진찰료", "col2": 100, "col3": 200, "col4": 300, "col5": 400, "col6": 500 },
        { "col1": "1인실", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "식대", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "행위료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "약품비", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "행위료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "약품비", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "마취료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "처치및수술료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "검사료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "영상진단료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "방사선치료료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "치료재료대", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "재활및물리치료료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "정신요법료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "전혈및혈액성분제제료", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "보장구", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
        { "col1": "CD필름", "col2": 0, "col3": 0, "col4": 0, "col5": 0, "col6": 0 },
    ];
    
    // 수정된 헤더 - 실제 받아오는 데이터 헤더
    let headers = ["본인부담금", "공단부담금", "전액본인부담", "선택진료료", "선택진료료 외"];
    
    let result = {
        'success': true,
        'message': 'OCR 처리가 완료되었습니다.',
        'data': {
            'headers': headers,
            'rows': data_rows,
            'total_rows': data_rows.length,
            'total_columns': headers.length
        }
    };
    
    scwin.createTable(result);
};

scwin.btn_before_onclick = function (e) {
    // 이전 화면으로
};

scwin.btn_next_onclick = function (e) {
    // 다음 화면으로
};
]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
    	<xf:group class="sub_contents" id="" meta_snippetCategory="00_화면시작" meta_snippetKeyComponent="true" meta_snippetName="0_01 페이지시작"
    		style="">
    		<xf:group class="pgtbox" id="" meta_snippetCategory="02_타이틀" meta_snippetKeyComponent="true" meta_snippetName="2_01 페이지타이틀"
    			style="">
    			<w2:textbox class="pgt_tit" id="" label="청구번호" style="" tagname=""></w2:textbox>
    			<w2:textbox class="pgt_tit" id="" label="피보험자" style="" tagname=""></w2:textbox>
    		</xf:group>
    		<xf:group class="schbox" id="" meta_snippetCategory="03_조회영역" meta_snippetKeyComponent="true" meta_snippetName="3_02 조회조건2행"
    			style="">
    			<xf:group class="schbox_inner" id="" style="">
    				<xf:group adaptive="layout" adaptiveThreshold="768" class="w2tb tbl " id="" style="" tagname="table">
    					<w2:attributes>
    						<w2:summary></w2:summary>
    					</w2:attributes>
    					<xf:group tagname="colgroup">
    						<xf:group style="width:100px;" tagname="col"></xf:group>
    						<xf:group style="" tagname="col"></xf:group>
    						<xf:group style="width:108px;" tagname="col"></xf:group>
    						<xf:group style="" tagname="col"></xf:group>
    					</xf:group>
    					<xf:group class="" id="" style="" tagname="tr">
    						<xf:group class="w2tb_th" style="" tagname="th">
    							<w2:textbox class="" id="" label="입통원일자" style=""></w2:textbox>
    						</xf:group>
    						<xf:group class="w2tb_td" style="" tagname="td">
    							<xf:select1 allOption="true" appearance="minimal" chooseOption="" class="" direction="auto" disabled="false"
    								disabledClass="w2selectbox_disabled" id="" ref="" renderType="" style="width:100px;" submenuSize="auto">
    								<xf:choices>
    									<xf:item>
    										<xf:label><![CDATA[new row]]></xf:label>
    										<xf:value></xf:value>
    									</xf:item>
    									<xf:item>
    										<xf:label><![CDATA[new row]]></xf:label>
    										<xf:value></xf:value>
    									</xf:item>
    									<xf:item>
    										<xf:label><![CDATA[new row]]></xf:label>
    										<xf:value></xf:value>
    									</xf:item>
    								</xf:choices>
    							</xf:select1>
    						</xf:group>
    						<xf:group class="w2tb_th" style="" tagname="th">
    							<w2:textbox class="req" id="" label="진료과/병원명" style=""></w2:textbox>
    						</xf:group>
    						<xf:group class="w2tb_td" id="" style="" tagname="td">
    							<xf:input class="" id="" placeholder="" style="width:150px;"></xf:input>
    						</xf:group>
    					</xf:group>
    					<xf:group class="" id="" style="" tagname="tr">
    						<xf:group class="w2tb_th" style="" tagname="th">
    							<w2:textbox class="" id="" label="병원등급" style=""></w2:textbox>
    						</xf:group>
    						<xf:group class="w2tb_td" style="" tagname="td">
    							<xf:input class="" id="" placeholder="" style="width:150px;"></xf:input>
    						</xf:group>
    						<xf:group class="w2tb_th" style="" tagname="th">
    							<w2:textbox class="" id="" label="환자구분" style=""></w2:textbox>
    						</xf:group>
    						<xf:group class="w2tb_td" id="" style="" tagname="td">
    							<xf:input class="" id="" placeholder="" style="width:150px;"></xf:input>
    						</xf:group>
    					</xf:group>
    				</xf:group>
    			</xf:group>
    			<xf:group class="btn_schbox" id="" style="">
    				<xf:trigger class="btn_cm sch" disabled="" escape="false" id="btn_ocr" style="" type="button" ev:onclick="scwin.btn_ocr_onclick">
    					<xf:label><![CDATA[OCR]]></xf:label>
    				</xf:trigger>
    			</xf:group>
    		</xf:group>
    		<xf:group style="width: 100%; display: flex;" id="">
        		<xf:group style="width: 70%;" id="">
        			<div style="" id="tableContainer"></div>
        		</xf:group>
        		<xf:group style="width: 30%; margin-left: 15px;" id="">
                    <div style="width:100%;" id="subTable"></div>
                    <div style="width:100%;" id="resultTable"></div>
                </xf:group>
            </xf:group>
    	</xf:group>
    </body>
</html>
